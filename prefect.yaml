# Prefect deployment config - run `prefect deploy` from repo root
prefect-version: "3"
name: claude-cicd

pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/kruczele/claude-cicd.git
      branch: main

deployments:
  - name: claude-dev-cycle
    entrypoint: orchestration/prefect_flows.py:development_cycle
    parameters:
      task_id: "task-example"
      repo_url: "https://github.com/kruczele/claude-cicd.git"
      task_title: "New Task"
      task_description: "Add your task instructions here"
      target_branch: "feature/claude-dev"
      main_branch: "main"
      priority: "medium"
    work_pool:
      name: "Claude CICD"
      work_queue_name: "claude-skills"
      job_variables:
        image: claude-skill-runner:latest
        volumes:
          - /var/run/docker.sock:/var/run/docker.sock
        # Note: GH_TOKEN_SURGEVENTURES and GH_TOKEN_KRUCZELE should be set
        # in the worker pool's default environment variables (via UI or API)
